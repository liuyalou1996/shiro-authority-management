<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.universe.mapper.UserDoMapper">

	<resultMap id="userResultMap" type="userdo">
		<id property="userId" column="user_id" />
		<result property="username" column="username" />
		<result property="password" column="password" />
		<result property="status" column="status" />
		<result property="createTime" column="create_time" />
		<result property="updateTime" column="update_time" />
	</resultMap>
	
	<select id="listUsers" resultMap="userResultMap">
		select user_id, username, password, status, create_time, update_time from tbl_user
	</select>
	
	<select id="getUserByUsername" parameterType="string" resultMap="userResultMap">
		select username,password,status from tbl_user where username = #{username}
	</select>
	
	<insert id="saveUser" parameterType="userdo">
		insert into tbl_user ( username, password, status, create_time, update_time ) 
		values (#{username}, #{password}, #{status}, #{createTime}, #{updateTime} )
	</insert>
	
	<update id="updateUser" parameterType="userdo">
		update tbl_user
		<set>
			<if test="@com.universe.common.util.ValidatingUtils@isEmpty(username)">
					username = #{username},
			</if>
			<if test="@com.universe.common.util.ValidatingUtils@isEmpty(password)">
					password = #{password},
			</if>
			<if test="@com.universe.common.util.ValidatingUtils@isEmpty(status)">
					status = #{status},
			</if>
			<if test="@com.universe.common.util.ValidatingUtils@isEmpty(createTime)">
					create_time = #{createTime},
			</if>
			<if test="@com.universe.common.util.ValidatingUtils@isEmpty(updateTime)">
					update_time = #{updateTime},
			</if>
		</set>
		where user_id = #{userId}
	</update>
	
	<update id="removeUserByUserId" parameterType="int">
		delete tbl_user where user_id = #{userId}
	</update>
</mapper>